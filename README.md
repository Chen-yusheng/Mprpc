# Mprpc：分布式网络通信框架
## 项目介绍
该项目旨在构建一个分布式RPC网络通信系统，以实现在分布式环境中不同节点之间的远程过程调用。选择muduo库作为网络通信框架，因为它是一个高性能的C++网络库，提供了异步I/O、事件驱动和多线程支持，适合构建高效的网络通信。选择Protobuf进行数据序列化和反序列化，因为它可以将结构化数据转换为紧凑的二进制格式，提高了网络传输效率。Zookeeper则用于服务发现和管理，确保服务的可用性和负载均衡。



### 集群、分布式、微服务辨析
**集群**
集群是指将多台服务器集中在一起，每台服务器都实现相同的业务，做相同的事情。但是每台服务器并不是缺一不可，存在的作用主要是缓解并发压力和单点故障转移问题。
集群主要的使用场景是为了分担请求的压力。但是，当压力进一步增大的时候，可能存在在某些业务逻辑上压力大的问题，此外集群并没有合理考虑到不同设备可能存在性能差异的问题，而且，对于集群，如果后期需要重新编译代码，则集群中的每一台设备都需要重新编译。

**分布式**
分布式服务是指将多台服务器集中在一起，服务是分散部署在不同的机器上的。每台服务器都实现总体中的不同业务，做不同的事情，一个服务器可能负责好几个功能。各分开部署的部分彼此通过各种通讯协议交互信息，并且每台服务器都缺一不可，如果某台服务器故障(分布式设备没有做分布式集群，只有一台的情况下)，则部分功能缺失，或导致整体无法运行。
分布式存在的主要作用是大幅度的提高效率，缓解服务器的访问和存储压力。区别分布式的方式是一个业务分拆多个子业务，部署在不同的服务器上。根据节点的并发要求，对一个节点可以再做节点模块集群部署。

分布式是解决中心化管理的问题，把所有的任务叠加到一个节点处理，太慢了。所以把一个大问题拆分为多个小问题，并分别解决，最终协同合作。
分布式的主要工作是分解任务，把职能拆解。分布式的主要应用场景是单台机器已经无法满足这种性能的要求，必须要融合多个节点，并且节点之间的相关部分是有交互的。

集群和分布式及其区别：
分布式：把一个大业务拆分成多个子业务，每个子业务都是一套独立的系统，子业务之间相互协作最终完成整体的大业务。 
集群：把处理同一个业务的系统部署多个节点。
把一套系统拆分成不同的子系统部署在不同服务器上，这叫分布式。
把多个相同的系统部署在不同的服务器上，这叫集群。部署在不同服务器上的相同系统叫做“负载均衡”。 

集群主要是简单加机器解决问题，对于问题本身不做任何分解。
分布式处理里必然涉及任务分解与答案归并。分布式中的某个子任务节点，可以是一个集群，该集群中的任一节点都作为一个完整的任务出现。
集群和分布式都是由多个节点组成，但集群中各节点间基本不需要通信协调，而分布式中各个节点的通信协调是必不可少的。
                    
**微服务**
微服务是系统架构的一个设计方式，它是将复杂的业务拆分成多个微小的服务，每个服务可单独运行和部署，各个微服务之间是松耦合的，每个微服务仅关注于完成一件任务并很好地完成该任务，服务与服务之间可以采用RPC来通信。
微服务相比分布式服务来说，它的粒度更小，服务之间耦合度更低。由于每个微服务都由独立的小团队负责，因此它敏捷性更高。分布式服务最后都会向微服务架构演化，这是一种趋势。不过服务微服务化后带来的挑战也是显而易见的，例如服务粒度小，数量大，后期运维难度会增大。

以上三者的区别：
* 集群实质是将几台服务器集中在一起，实现同一业务
* 分布式是一种系统的部署方式，主要是将同一个服务，拆分成可以去部署到多台机器。
* 分布式中的每一个节点，都可以做集群，而集群并不一定就是分布式的
* 微服务是系统架构的一个设计方式，它是将复杂的业务拆分成多个微小的服务，每个服务可单独运行和部署，服务与服务之间可以采用RPC来通信。
* 分布式部署不一定是微服务架构，而微服务的应用也不一定是要采用分布式部署
* 微服务架构是分布式服务架构的子集



### 什么是rpc
RPC（Remote Procedure Call Protocol）远程过程调用协议。一个通俗的描述是：客户端在不知道调用细节的情况下，调用存在于远程计算机上的某个服务对象，就像调用本地应用程序中的对象一样。
比较正式的描述是：一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。




## 文件架构及使用方式
项目代码文件目录结构：
|--bin      存放可执行文件
|--build    cmake构建的中间文件
|--example  存放框架使用示例代码
|--include  存放头文件
|--lib      编译生成的动态库
|--src      项目源代码  存放框架代码
|--test     示例代码
|--autobuild.sh  一键编译
|--CMakeLists.txt  Cmake顶层目录配置文件

使用方式：用户可以通过运行autobuild.sh脚本一键编译项目文件，也可以通过如下步骤编译项目：
1. 进入buil目录
2. 执行`cmake ..`
3. 执行`make`
4. 如果没问题的话，会在bin目录生成相应的可执行文件


## 项目特点
* 基于muduo网络库实现高并发网络通信模块，作为RPC远程调用的基础。
* 基于Protobuf实现RPC方法调用和参数的序列化和反序列化，并根据其提供得RPC接口编写RPC服务。
* 基于ZooKeeper分布式协调服务中间件提供服务注册和服务发现功能。
* 基于生产者消费者模型，实现了异步工作方式的日志模块。




## 中间件选型
### Protobuf
#### Protobuf的作用


#### Protobuf相较于Json、xml的优缺点


#### 


### Zookeeper